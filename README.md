# Shop API

e-commerce API на .NET 8, построенное по принципам **Vertical Slice Architecture**.

## Технологический стек

### Основные фреймворки
- **.NET 8** - LTS версия, пока решил не переходить на .Net 10
- **ASP.NET Core** - Современный веб-фреймворк

### Архитектура и паттерны
- **Vertical Slice Architecture** - Архитектура вертикальных срезов вместо горизонтальных слоев
- **MediatR** - Идеально подходит для VSA, обработка каждого запроса как изолированной функциональности
- **FluentValidation** - Fluent валидация для проверки запросов
- **Ardalis.Result** - Стандартизированный паттерн результата для согласованных ответов API

### Данные и безопасность
- **Entity Framework Core** - ORM для доступа к данным
- **InMemory Database** - Провайдер базы данных для разработки и тестирования
- **JWT аутентификация** - Аутентификация на основе токенов с куками

## Архитектура Vertical Slice

Проект организован по функциональным вертикальным срезам, где каждый срез содержит всю логику для конкретной функциональности

Каждый срез включает:
- Command/Query (MediatR)
- Handler (бизнес-логика)
- Validator (FluentValidation, в основном для команд)

## Аутентификация

### Реализация JWT
- **Простой JWT flow** только с access токенами
- **Хранение токенов в куках** для веб-приложений
- **Ролевая модель** (Buyer, Seller)

## Доступные эндпоинты

### Аутентификация
- POST /api/auth/register
- POST /api/auth/login

### Товары
- GET /api/items
- GET /api/items/{id}
- POST /api/items
- PATCH /api/items/{id}
- DELETE /api/items/{id}

### Покупки
- GET /api/purchases/{id}
- GET /api/purchases
- POST /api/purchases

## Unit тесты
По заданию требовался как минимум один unit тест для логики покупки, таких тестов предоставлено 7 в проекте Shop.Tests

## Postman коллекция
Postman коллекция с одним сценарием по созданию и покупки товара: 

## Трудности с Extra пунктом
Возникли трудности при реализации дополнительного пункта, где требовалось обновление статистики самой продаваемой категории, а также использование IOptionMonitor.

### Альтернативное решение
Как альтернативное решение я мог бы предложить использовать отдельную сущность в базе данных для статистики, в случае микросервисной архитектуры - выделил бы отдельный сервис статистики
